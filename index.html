<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pok√©mon Guessing Game</title>
  <style>
    body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: #f3f4f6; }
    .container { text-align: center; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); width: 90%; }
    .pokemon-button { margin: 5px; padding: 5px 10px; border: none; background-color: #4CAF50; color: white; border-radius: 8px; cursor: pointer; }
    .pokemon-button:hover { background-color: #45a049; }
    input { padding: 8px; border-radius: 8px; border: 1px solid #ccc; }
    button { padding: 8px 12px; border-radius: 8px; background-color: #007BFF; color: white; border: none; cursor: pointer; }
    button:hover { background-color: #0056b3; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 8px; border: 1px solid #ccc; text-align: center; width: 120px; height: 120px; }
    .green { background-color: #4CAF50; color: white; }
    .yellow { background-color: #FFC107; color: black; }
    .red { background-color: #F44336; color: white; }
    img { width: 80px; height: 80px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Pok√©mon Guessing Game</h1>
    <input type="text" id="guess" placeholder="Guess the Pok√©mon">
    <button onclick="checkGuess()">Guess</button>
    <p id="message"></p>

    <table id="hints-table">
      <tr>
        <th>Pok√©mon</th>
        <th>Type 1</th>
        <th>Type 2</th>
        <th>Region</th>
        <th>Highest Stat</th>
        <th>Height</th>
        <th>Weight</th>
      </tr>
    </table>
  </div>

  <script>
    let pokemonData = [];
    let secretPokemon = 'Bulbasaur';

    // Zakodowanie region√≥w Pok√©mon√≥w na podstawie ID
    const regions = {
      Kanto: { minId: 1, maxId: 151 },
      Johto: { minId: 152, maxId: 251 },
      Hoenn: { minId: 252, maxId: 386 },
      Sinnoh: { minId: 387, maxId: 493 },
      Unova: { minId: 494, maxId: 649 },
      Kalos: { minId: 650, maxId: 721 },
      Alola: { minId: 722, maxId: 809 },
      Galar: { minId: 810, maxId: 898 }
    };

    // Za≈Çaduj dane z pliku JSON
    fetch('pokedex.json')
      .then(response => response.json())
      .then(data => {
        pokemonData = data;
        console.log("Pok√©mon Data Loaded:", pokemonData);
      })
      .catch(error => {
        console.error("Error loading Pok√©mon data:", error);
      });

    // Funkcja do sprawdzania zgadywanego Pok√©mona
    function checkGuess() {
      const guess = document.getElementById('guess').value.trim();
      const guessPokemon = pokemonData.find(pokemon => pokemon.name.english.toLowerCase() === guess.toLowerCase());

      if (!guessPokemon) {
        document.getElementById('message').textContent = '‚ùå Pok√©mon not found!';
        return;
      }

      const secretPokemonData = pokemonData.find(pokemon => pokemon.name.english === secretPokemon);
      const highestStat = getHighestStat(guessPokemon);

      document.getElementById('message').textContent = guess === secretPokemon ? 'üéâ Correct! You guessed the Pok√©mon!' : '‚ùå Wrong guess, try again!';

      // Dodaj dane do tabeli
      const row = `<tr>
        <td><img src="${guessPokemon.image.thumbnail}" alt="${guessPokemon.name.english}"></td>
        ${generateHint(guessPokemon.type[0], secretPokemonData.type[0])}
        ${generateHint(guessPokemon.type[1], secretPokemonData.type[1] || 'N/A')}
        ${generateRegion(guessPokemon.id)}
        ${generateHighestStat(highestStat.value, highestStat.name)}
        ${generateHint(guessPokemon.profile.height, secretPokemonData.profile.height)}
        ${generateHint(guessPokemon.profile.weight, secretPokemonData.profile.weight)}
      </tr>`;

      document.getElementById('hints-table').innerHTML += row;
    }

    // Funkcja do znalezienia najwy≈ºszej statystyki
    function getHighestStat(pokemon) {
      const stats = pokemon.base;
      const highestStatValue = Math.max(...Object.values(stats));
      const highestStatName = Object.keys(stats).find(key => stats[key] === highestStatValue);
      return { value: highestStatValue, name: highestStatName };
    }

    // Funkcja do okre≈õlania regionu na podstawie ID
    function generateRegion(id) {
      for (let region in regions) {
        const regionData = regions[region];
        if (id >= regionData.minId && id <= regionData.maxId) {
          return `<td>${region}</td>`;
        }
      }
      return `<td>Unknown</td>`;  // Je≈õli ID nie pasuje do ≈ºadnego regionu
    }

    // Funkcja do generowania najwy≈ºszej statystyki
    function generateHighestStat(value, statName) {
      return `<td class="${value === undefined ? 'red' : 'green'}">${value} (${statName})</td>`;
    }

    // Funkcja do generowania wskaz√≥wek z odpowiednimi kolorami
    function generateHint(guessValue, secretValue) {
      let className = 'red';  // Domy≈õlnie czerwona
      if (guessValue === secretValue) {
        className = 'green';  // Je≈õli warto≈õci sƒÖ identyczne
      } else if (guessValue && secretValue) {
        // Dla przypadk√≥w, w kt√≥rych warto≈õci sƒÖ podobne (np. typy, waga)
        if (typeof guessValue === 'string' && secretValue.includes(guessValue.substring(0, 3))) {
          className = 'yellow';  // Je≈õli pierwszy fragment pasuje
        } else if (typeof guessValue === 'number' && Math.abs(guessValue - secretValue) <= 0.5) {
          className = 'yellow';  // Je≈õli r√≥≈ºnica w warto≈õciach liczbowych jest ma≈Ça
        }
      }
      return `<td class="${className}">${guessValue || 'N/A'}</td>`;
    }
  </script>
</body>
</html>
